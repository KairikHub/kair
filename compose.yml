services:
  kairik-ui:
    build: .
    entrypoint: ["/app/bin/ensure-openclaw-built.sh", "npm", "run", "ui", "--"]
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - /app/node_modules
      - ${OPENCLAW_CONFIG_DIR:-./.openclaw}:/home/node/.openclaw
      - ${OPENCLAW_WORKSPACE_DIR:-./.openclaw-workspace}:/home/node/.openclaw/workspace
  kairik:
    build: .
    entrypoint: ["/app/bin/cli-entrypoint.sh"]
    volumes:
      - .:/app
      - /app/node_modules
      - ${OPENCLAW_CONFIG_DIR:-./.openclaw}:/home/node/.openclaw
      - ${OPENCLAW_WORKSPACE_DIR:-./.openclaw-workspace}:/home/node/.openclaw/workspace
    profiles: ["cli"]
